---
import Card from './Card.astro'

import { getCollection } from 'astro:content';
const projects = await getCollection('projects');

// Sort projects by date in descending order (newest first)
const sortedProjects = [...projects].sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---
<section>
  <h2>Recent Work</h2>
  <!-- <ul>
    <Card v-for="proj in projects" :key="proj.stem" :project="proj"/>
  </ul> -->

  <ul>
  {sortedProjects.map(proj => (
    <Card id={proj.id} project={proj.data}/>
  ))}
</ul>
</section>
<style lang="scss" scoped>
section {
  display: flex;
  flex-direction: column;

  h2 {
    align-self: flex-end;
  }

  ul {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    margin-top: 2rem;
    margin-bottom: 2rem;
  }
}
</style>